---
layout: post
author: zoomq
title: D码点评:0 单行素数遍历
description: ~ 麻辣评点,善意满盈
categories: gDgcoDe
tags:  gdg D码点评 dd wechat pythonic coding
---

大家好,这里是珠海GDG 的微信订阅号!

- 今天是周二,开始每周一段儿的节奏,分享组委大妈印象深刻的代码!
- 为毛自称 `大妈` ? 说起来都是桑心事儿,以后再解释!-)


## 单行程序 扫描素数

![](http://zoomq.qiniudn.com/ZHGDG/wechat/130820_pyprime.png)

代码出处:

http://wiki.woodpecker.org.cn/moin/IntroPy

啄木鸟社区,收集的有关Python 推介资料中的经典代码案例!

其直觉版本是:

{% highlight python %}
[p for p in range(2,N) if  0 not in [p%d for d in range(2,p-1)]]
{% endhighlight %}


<!--more-->

好的,这么看起来很复杂的样子,进行合理缩进再看一下:

{% highlight python %}
[p for p in range(2,N) 
    if  0 not in [p%d 
        for d in range(2,p-1)
        ]
    ]
{% endhighlight %}


就可以看出,只是两层循环了...

不过,还是不明白为什么一行就可以求出指定范围的素数呢?
这其中涉及几个基础的Python 语言特性,逐一解说一下,就明白了:

range() 函式,就是生成数字序列

- range(2,10) -> [2, 3, 4, 5, 6, 7, 8, 9]
- 就是生成一个列表


`for x in range()` 就是对指定序列进行循环

- 比如: `for x in range(3): print x`
- 就是逐一打印 0,1,2

`[p for p in range()]` 这种在列表内部包含语句的形式 叫 `列表推导式`

- 就是自动将语句执行结果直接放置到一个列表对象中
- 比如: `[p for p in range(2,5) if p%2==0]`
- 就是输出 2~5 整数序列,中的偶数
- 即-> `[2,4]`

以上,综合起来,表述: `在指定整数范围中,扫描除了1和自身,小于自身的所有正整数都无法整除的数` ~ 即 `素数` !

{% highlight python %}
[p for p in range(2,N)  # 描述N以内所有整数
    if  0 not in [p%d   # 都无法整除
        for d in range(2,p-1) # 尝试小于自身大于1的所有整数
        ]
    ]
{% endhighlight %}



好的,从一行代码就可以自然的表述出素数的求解,
可以看出 Python 是多么自在的一种脚本语言,可以帮助我们快速的完成各种想法的探索!

关注问题的解决,而不是语言本身的各种隐藏问题的理解.

所以,抽空学习/尝试并喜爱上 Python 吧!

嗯嗯嗯, 最后是标准的提高扫描效率,使用开平方的方式节约不必要计算的实用版本:

{% highlight python %}
from math import sqrt
# 求N 以内的素数...
from math import sqrt
N = 100
[ p for p in range(2, N) 
    if 0 not in [ p%d 
        for d in range(2, int(sqrt(p))+1)
                ] 
]
{% endhighlight %}


祝大家 Happy hacking!


## PS:

上周的推送,导致了一名订阅者的退订! 好吧,俺相信是因为提及了 Bonnie 的腿;-)

其实,连同珠海GDG 的线下活动一样, 珠海GDG 的微信公众号,也是个开放的沟通渠道,
大家,有什么想说的,想推荐的,完全可以通过邮件列表/回复微信,等等方式向大妈们吼出来,
就有可能收录,并署名发布在社区 blog 以及 微信文章中...

来吧!不要吝啬,跟小伙伴们分享的越多,越能获得的更多!


## 近期活动


9.14 珠海首届 DevFest:

- 预订问卷: http://f.jeffkit.info/zoomquiet/devfest914zh/     
- 持续一整天的 开发者 节日
- 多种前沿技术的体验分享
- 丰富的活动形式
- 给力的 BBQ 午餐
- ... 
- 及时报名,才有席位哪!


## 微信栏目
当前大约是: 

        周一: G术图书 (gb:推荐好书,书无中外)
        周二: D码点评 (dd:麻辣评点,善意满盈)
        周三: G说公论 (gt:时评杂文,新旧不拘)
        周四: 珠的自白(dm:大妈自述,每周一篇)
        周五: 海选文章(hd:得要相信,大妈法眼)

乍一看,好象发送的太过于频繁了点儿

但是,要这么想,珠海常任执行组委有6名,平均下来,每个组委每周,也就一篇文章而已
当然,更加重要的是我们感受到 微信5.0 发布后,以更加恐怖的速度在占据中国移动互联网的终端空间,微信已经是实事上的随身沟通平台,那么作为 `珠海生活中的技术社区` 我们就必须真正走入大家的生活!

进一步的,如果认真分析当前社区各种沟通渠道,其实都不是很好的意见表述渠道:

- 邮件列表,倾向异步的理性技术讨论,对于多数并没有太多开发背景的同学们而言,总是佷有隔阂感;
- weibo,虽然也是很主流的SNS 渠道,但是,太过公开,而且只有140字的限制,很难将一个具体问题,深入的交流起来;
- G+ 无论 page 或是 community 虽然功能很美好,但是,毕竟是墙外的服务,无法令所有社员简单的都享受起来
- 新发现还没有被和谐的 Google 汇问,则更加专注具体主题的共同思考,无法自在的进行双向交流
- BBS? `形式决定内容` 在这种平台上,大家已经条件反射性的除了点赞已经忘记了其它交流... 

所以?! 目测,当前可以全体都有,随时翻阅,长文可发,相对封闭,基本友好的交流渠道,只有 wechat 了!

所以! 珠海的组委大妈们,决定开始坚持发文,从 技术的方方面面,细细同大家分享/交流

所以! 请大家告诉大家,  `珠海生活中的技术社区` 已经认真回归 微信,都来订阅吧!

